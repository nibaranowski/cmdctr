"use strict";(()=>{var t={};t.id=117,t.ids=[117],t.modules={145:t=>{t.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},9926:t=>{t.exports=import("zod")},6249:(t,e)=>{Object.defineProperty(e,"l",{enumerable:!0,get:function(){return function t(e,a){return a in e?e[a]:"then"in e&&"function"==typeof e.then?e.then(e=>t(e,a)):"function"==typeof e&&"default"===a?e:void 0}}})},2196:(t,e,a)=>{a.a(t,async(t,r)=>{try{a.r(e),a.d(e,{config:()=>l,default:()=>c,routeModule:()=>u});var i=a(1802),n=a(7153),o=a(6249),s=a(395),d=t([s]);s=(d.then?(await d)():d)[0];let c=(0,o.l)(s,"default"),l=(0,o.l)(s,"config"),u=new i.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/core-objects",pathname:"/api/core-objects",bundlePath:"",filename:""},userland:s});r()}catch(t){r(t)}})},8427:(t,e,a)=>{a.a(t,async(t,r)=>{try{a.d(e,{B:()=>o});var i=a(9926),n=t([i]);let o=(i=(n.then?(await n)():n)[0]).z.object({id:i.z.string(),metabox_id:i.z.string(),title:i.z.string().min(1,"Title is required"),description:i.z.string().optional(),status:i.z.enum(["active","archived","draft","completed","blocked","pending"]),phase_id:i.z.string(),assigned_user_id:i.z.string().optional(),agent_id:i.z.string().optional(),activity_log:i.z.array(i.z.object({id:i.z.string(),agent_id:i.z.string().optional(),core_object_id:i.z.string().optional(),user_id:i.z.string().optional(),type:i.z.string(),message:i.z.string(),timestamp:i.z.string().datetime()})),data:i.z.record(i.z.unknown()).optional(),created_at:i.z.string().datetime(),updated_at:i.z.string().datetime(),metadata:i.z.record(i.z.unknown()).optional()});r()}catch(t){r(t)}})},395:(t,e,a)=>{a.a(t,async(t,r)=>{try{a.r(e),a.d(e,{default:()=>o});var i=a(8427),n=t([i]);i=(n.then?(await n)():n)[0];let s=[];async function o(t,e){if("GET"===t.method)try{let{metabox_id:a,phase_id:r,assigned_user_id:i,agent_id:n,status:o}=t.query,d=[...s];if(a&&(d=d.filter(t=>t.metabox_id===a)),r&&(d=d.filter(t=>t.phase_id===r)),i&&(d=d.filter(t=>t.assigned_user_id===i)),n&&(d=d.filter(t=>t.agent_id===n)),o){let t=Array.isArray(o)?o:[o];d=d.filter(e=>t.includes(e.status))}e.status(200).json(d)}catch(t){e.status(500).json({error:"Failed to fetch core objects"})}else if("POST"===t.method)try{let a=t.body,r=i.B.safeParse({id:`coreobj_${Date.now()}`,...a,status:a.status||"active",activity_log:[],created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(!r.success)return e.status(400).json({error:"Invalid core object data",details:r.error});let n=r.data;s.push(n),e.status(201).json(n)}catch(t){e.status(500).json({error:"Failed to create core object"})}else e.setHeader("Allow",["GET","POST"]),e.status(405).json({error:`Method ${t.method} Not Allowed`})}r()}catch(t){r(t)}})},7153:(t,e)=>{var a;Object.defineProperty(e,"x",{enumerable:!0,get:function(){return a}}),function(t){t.PAGES="PAGES",t.PAGES_API="PAGES_API",t.APP_PAGE="APP_PAGE",t.APP_ROUTE="APP_ROUTE"}(a||(a={}))},1802:(t,e,a)=>{t.exports=a(145)}};var e=require("../../webpack-api-runtime.js");e.C(t);var a=e(e.s=2196);module.exports=a})();