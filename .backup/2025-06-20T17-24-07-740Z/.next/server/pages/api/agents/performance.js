"use strict";(()=>{var e={};e.id=237,e.ids=[237],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,s){return s in t?t[s]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,s)):"function"==typeof t&&"default"===s?t:void 0}}})},6253:(e,t,s)=>{s.r(t),s.d(t,{config:()=>u,default:()=>c,routeModule:()=>d});var r={};s.r(r),s.d(r,{default:()=>l});var a=s(1802),i=s(7153),n=s(6249),o=s(8214);async function l(e,t){if("GET"!==e.method)return t.status(405).json({error:"Method not allowed"});try{let e=o.k.getPerformanceReport();t.status(200).json({success:!0,data:e,timestamp:new Date().toISOString()})}catch(e){console.error("Error fetching performance metrics:",e),t.status(500).json({success:!1,error:"Failed to fetch performance metrics",timestamp:new Date().toISOString()})}}let c=(0,n.l)(r,"default"),u=(0,n.l)(r,"config"),d=new a.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/agents/performance",pathname:"/api/agents/performance",bundlePath:"",filename:""},userland:r})},8214:(e,t,s)=>{s.d(t,{k:()=>a});class r{setLevel(e){this.level=e}info(e,...t){["info","debug"].includes(this.level)&&console.info(`[INFO] ${e}`,...t)}warn(e,...t){["warn","info","debug"].includes(this.level)&&console.warn(`[WARN] ${e}`,...t)}error(e,...t){["error","warn","info","debug"].includes(this.level)&&console.error(`[ERROR] ${e}`,...t)}debug(e,...t){"debug"===this.level&&console.debug(`[DEBUG] ${e}`,...t)}startTimer(e,t){let s=`timer_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,r=performance.now();return"debug"===this.level&&this.debug(`Started timer for operation: ${e}`,{timerId:s,metadata:t}),global.__timers=global.__timers||new Map,global.__timers.set(s,{operation:e,startTime:r,metadata:t}),s}endTimer(e,t){let s=global.__timers;if(!s||!s.has(e))return this.warn(`Timer not found: ${e}`),null;let r=s.get(e),a=performance.now()-r.startTime,i={operation:r.operation,duration:a,timestamp:new Date().toISOString(),metadata:{...r.metadata,...t}};return this.performanceMetrics.push(i),s.delete(e),"debug"===this.level?this.debug(`Completed operation: ${r.operation}`,{duration:`${a.toFixed(2)}ms`,metric:i}):this.info(`Performance: ${r.operation} completed in ${a.toFixed(2)}ms`),i}updateTaskMetrics(e,t){if(this.taskMetrics.total_tasks++,this.taskMetrics.tasks_by_status[e]=(this.taskMetrics.tasks_by_status[e]||0)+1,t&&"completed"===e){let e=this.taskMetrics.average_completion_time,s=this.taskMetrics.tasks_by_status.completed||0;this.taskMetrics.average_completion_time=(e*(s-1)+t)/s}"debug"===this.level&&this.debug("Task metrics updated",{status:e,completionTime:t,metrics:this.taskMetrics})}setQueueLength(e){this.taskMetrics.queue_length=e,"debug"===this.level&&this.debug(`Queue length updated: ${e}`)}updateAgentMetrics(e,t,s,r){let a=this.agentMetrics.get(e);if(a||(a={agent_id:e,agent_name:t,tasks_completed:0,tasks_failed:0,average_execution_time:0,success_rate:0,last_activity:new Date().toISOString()},this.agentMetrics.set(e,a)),s?a.tasks_completed++:a.tasks_failed++,r){let e=a.tasks_completed+a.tasks_failed,t=a.average_execution_time;a.average_execution_time=(t*(e-1)+r)/e}a.success_rate=a.tasks_completed/(a.tasks_completed+a.tasks_failed),a.last_activity=new Date().toISOString(),"debug"===this.level&&this.debug("Agent metrics updated",{agentId:e,success:s,executionTime:r,metrics:a})}getPerformanceReport(){let e=this.performanceMetrics.slice(-100),t=Array.from(this.agentMetrics.values()),s=e.length,r=s>0?e.reduce((e,t)=>e+t.duration,0)/s:0,a=e.length>0?e.reduce((e,t)=>t.duration>e.duration?t:e):null,i=e.length>0?e.reduce((e,t)=>t.duration<e.duration?t:e):null;return{recent_metrics:e,task_metrics:this.taskMetrics,agent_metrics:t,summary:{total_operations:s,average_duration:r,slowest_operation:a,fastest_operation:i}}}clearOldMetrics(e=24){let t=Date.now()-36e5*e;this.performanceMetrics=this.performanceMetrics.filter(e=>new Date(e.timestamp).getTime()>t),"debug"===this.level&&this.debug(`Cleared metrics older than ${e} hours`)}constructor(){this.level="info",this.performanceMetrics=[],this.taskMetrics={total_tasks:0,tasks_by_status:{},average_completion_time:0,queue_length:0},this.agentMetrics=new Map}}let a=new r},7153:(e,t)=>{var s;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return s}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(s||(s={}))},1802:(e,t,s)=>{e.exports=s(145)}};var t=require("../../../webpack-api-runtime.js");t.C(e);var s=t(t.s=6253);module.exports=s})();