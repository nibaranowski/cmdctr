"use strict";(()=>{var e={};e.id=525,e.ids=[525],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},5289:(e,t,r)=>{r.r(t),r.d(t,{config:()=>v,default:()=>g,routeModule:()=>P});var n={};r.r(n),r.d(n,{default:()=>f});var a=r(1802),o=r(7153),s=r(6249);let i=require("child_process"),c=require("fs");var d=r.n(c);let u=require("path");var l=r.n(u);let p=(0,require("util").promisify)(i.exec);async function f(e,t){if("GET"!==e.method)return t.status(405).json({error:"Method not allowed"});try{let e;let r=l().join(process.cwd(),"coverage/coverage-summary.json"),n=l().join(process.cwd(),"coverage/lcov.info");if(d().existsSync(r))e=JSON.parse(d().readFileSync(r,"utf8"));else if(d().existsSync(n)){let t=d().readFileSync(n,"utf8").split("\n"),r=0,a=0;for(let e of t)e.startsWith("LF:")?r+=parseInt(e.split(":")[1]):e.startsWith("LH:")&&(a+=parseInt(e.split(":")[1]));let o=r>0?a/r*100:0;e={total:{statements:{pct:o},branches:{pct:o},functions:{pct:o},lines:{pct:o}}}}else try{if(await p("npm test -- --coverage --silent"),d().existsSync(r))e=JSON.parse(d().readFileSync(r,"utf8"));else throw Error("No coverage data generated")}catch(e){return console.error("Error running tests:",e),t.status(200).json({dev:{backend:0,frontend:0,coverage:0},staging:{backend:0,frontend:0,coverage:0},prod:{backend:0,frontend:0,coverage:0}})}let a=e.total,o={dev:{backend:Math.round(a.statements.pct),frontend:Math.round(a.lines.pct),coverage:Math.round((a.statements.pct+a.branches.pct+a.functions.pct+a.lines.pct)/4)},staging:{backend:100,frontend:100,coverage:100},prod:{backend:100,frontend:100,coverage:100}};t.status(200).json(o)}catch(e){console.error("Error getting coverage data:",e),t.status(500).json({error:"Failed to get coverage data"})}}let g=(0,s.l)(n,"default"),v=(0,s.l)(n,"config"),P=new a.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/test-status",pathname:"/api/test-status",bundlePath:"",filename:""},userland:n})},7153:(e,t)=>{var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},1802:(e,t,r)=>{e.exports=r(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var r=t(t.s=5289);module.exports=r})();